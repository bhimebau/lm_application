<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>uEACos: ueaclib.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>ueaclib.h File Reference</h1>
<p>
This graph shows which files directly or indirectly include this file:<p><center><img src="ueaclib_8h__dep__incl.png" border="0" usemap="#ueaclib.hdep_map" alt=""></center>
<map name="ueaclib.hdep_map">
<area href="calibrate_8c.html" shape="rect" coords="149,8,232,34" alt="">
<area href="external__flash_8c.html" shape="rect" coords="133,58,248,85" alt="">
<area href="global_8c.html" shape="rect" coords="157,109,224,136" alt="">
<area href="interpreter_8c.html" shape="rect" coords="145,160,236,186" alt="">
<area href="lla_8c.html" shape="rect" coords="168,210,213,237" alt="">
<area href="main_8c.html" shape="rect" coords="160,261,221,288" alt="">
<area href="timer_8c.html" shape="rect" coords="160,312,221,338" alt="">
<area href="ueac_8c.html" shape="rect" coords="160,362,221,389" alt="">
<area href="ueaclib_8c.html" shape="rect" coords="153,413,228,440" alt="">
</map>

<p>
<a href="ueaclib_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a0">BLACK</a>&nbsp;&nbsp;&nbsp;&quot;\x1B[30m&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a1">RED</a>&nbsp;&nbsp;&nbsp;&quot;\x1B[31m&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a2">GREEN</a>&nbsp;&nbsp;&nbsp;&quot;\x1B[32m&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a3">BACK_WHITE</a>&nbsp;&nbsp;&nbsp;&quot;\x1B[47m&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a4">CLR</a>&nbsp;&nbsp;&nbsp;&quot;\033[2J&quot;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a5">TERM_RESET</a>&nbsp;&nbsp;&nbsp;&quot;\033[H&quot;</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a6">init_sys</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a7">putchar_0</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a8">getchar_0</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a9">putchar</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a10">getchar</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a11">send_spi_byte</a> (unsigned char)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a12">write_dac</a> (int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a13">write_current</a> (int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a14">write_led</a> (int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a15">write_lla</a> (int, int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a16">start_a2d_converter</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a17">wait_a2d_busy</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a18">write_analog_mux</a> (unsigned char)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a19">system_reset</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a20">led_pwm</a> (int)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ueaclib_8h.html#a21">clear_led_screen</a> (void)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a3"></a><!-- doxytag: member="ueaclib.h::BACK_WHITE" ref="a3" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define BACK_WHITE&nbsp;&nbsp;&nbsp;&quot;\x1B[47m&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00068">68</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.
<p>
Referenced by <a class="el" href="main_8c-source.html#l00088">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0"></a><!-- doxytag: member="ueaclib.h::BLACK" ref="a0" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define BLACK&nbsp;&nbsp;&nbsp;&quot;\x1B[30m&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00065">65</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.
<p>
Referenced by <a class="el" href="external__flash_8c-source.html#l00053">flash_integrity_test()</a>, and <a class="el" href="calibrate_8c-source.html#l00061">scan_leds()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="ueaclib.h::CLR" ref="a4" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CLR&nbsp;&nbsp;&nbsp;&quot;\033[2J&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00070">70</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.
<p>
Referenced by <a class="el" href="main_8c-source.html#l00088">main()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="ueaclib.h::GREEN" ref="a2" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define GREEN&nbsp;&nbsp;&nbsp;&quot;\x1B[32m&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00067">67</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.
<p>
Referenced by <a class="el" href="external__flash_8c-source.html#l00053">flash_integrity_test()</a>, and <a class="el" href="calibrate_8c-source.html#l00061">scan_leds()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="ueaclib.h::RED" ref="a1" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define RED&nbsp;&nbsp;&nbsp;&quot;\x1B[31m&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00066">66</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.
<p>
Referenced by <a class="el" href="external__flash_8c-source.html#l00053">flash_integrity_test()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="ueaclib.h::TERM_RESET" ref="a5" args="" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TERM_RESET&nbsp;&nbsp;&nbsp;&quot;\033[H&quot;          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8h-source.html#l00071">71</a> of file <a class="el" href="ueaclib_8h-source.html">ueaclib.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a21"></a><!-- doxytag: member="ueaclib.h::clear_led_screen" ref="a21" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void clear_led_screen           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00489">489</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
Referenced by <a class="el" href="ueac_8c-source.html#l00064">ueac_execute_instruction()</a>.<div class="fragment"><pre class="fragment"><a name="l00489"></a>00489                              {
<a name="l00490"></a>00490   P1OUT=0;
<a name="l00491"></a>00491   P5OUT=0x07;
<a name="l00492"></a>00492   P5OUT=0;
<a name="l00493"></a>00493   P2OUT&amp;=~0x01;
<a name="l00494"></a>00494 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10"></a><!-- doxytag: member="ueaclib.h::getchar" ref="a10" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char getchar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00184">184</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
Referenced by <a class="el" href="calibrate_8c-source.html#l00111">current_output_calibration()</a>, and <a class="el" href="main_8c-source.html#l00129">get_command()</a>.<div class="fragment"><pre class="fragment"><a name="l00184"></a>00184                    {
<a name="l00185"></a>00185   <span class="keywordtype">char</span> rx_data;
<a name="l00186"></a>00186   <span class="keywordflow">while</span> (!(IFG2&amp;URXIFG1));
<a name="l00187"></a>00187   rx_data= RXBUF1;
<a name="l00188"></a>00188   <span class="keywordflow">return</span> (rx_data);
<a name="l00189"></a>00189 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="ueaclib.h::getchar_0" ref="a8" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char getchar_0           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6"></a><!-- doxytag: member="ueaclib.h::init_sys" ref="a6" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void init_sys           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00079">79</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
References <a class="el" href="ueaclib_8c-source.html#l00101">clear_latches()</a>, <a class="el" href="ueaclib_8c-source.html#l00350">init_a2d()</a>, <a class="el" href="ueaclib_8c-source.html#l00310">init_dac()</a>, <a class="el" href="ueaclib_8c-source.html#l00191">init_pins()</a>, <a class="el" href="ueaclib_8c-source.html#l00162">init_serial_1()</a>, <a class="el" href="ueaclib_8c-source.html#l00140">init_spi_0()</a>, <a class="el" href="ueaclib_8c-source.html#l00300">init_timer_a()</a>, and <a class="el" href="ueaclib_8c-source.html#l00107">Set_DCO()</a>.
<p>
Referenced by <a class="el" href="main_8c-source.html#l00088">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00079"></a>00079                     {
<a name="l00080"></a>00080   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00081"></a>00081   WDTCTL = WDTPW + WDTHOLD;    <span class="comment">// Stop watchdog</span>
<a name="l00082"></a>00082   <a class="code" href="ueaclib_8c.html#a3">init_pins</a>();                 <span class="comment">// Setup the discrete I/O - important to enable 8Mhz crystal </span>
<a name="l00083"></a>00083   <span class="keywordflow">for</span> (i = 0xFFFF;i&gt;0;i--);    <span class="comment">// Delay for XTAL and oscillator to fire up and settle</span>
<a name="l00084"></a>00084   <a class="code" href="ueaclib_8c.html#a10">Set_DCO</a>();                   <span class="comment">// calibrate DCO using the 32.768Khz crystal to 3.686400 Mhz  </span>
<a name="l00085"></a>00085   <a class="code" href="ueaclib_8c.html#a4">init_spi_0</a>();
<a name="l00086"></a>00086   <a class="code" href="ueaclib_8c.html#a5">init_serial_1</a>();             <span class="comment">// initialize USB virtual serial port</span>
<a name="l00087"></a>00087   <a class="code" href="ueaclib_8c.html#a6">init_timer_a</a>();              
<a name="l00088"></a>00088   <a class="code" href="ueaclib_8c.html#a7">init_dac</a>();
<a name="l00089"></a>00089   <a class="code" href="ueaclib_8c.html#a8">init_a2d</a>();
<a name="l00090"></a>00090   <a class="code" href="ueaclib_8c.html#a11">clear_latches</a>();
<a name="l00091"></a>00091   _EINT();                     <span class="comment">// Global interrupt enable</span>
<a name="l00092"></a>00092 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="ueaclib_8h_a6_cgraph.png" border="0" usemap="#ueaclib_8h_a6_cgraph_map" alt=""></center>
<map name="ueaclib_8h_a6_cgraph_map">
<area href="ueaclib_8c.html#a11" shape="rect" coords="122,7,224,34" alt="">
<area href="ueaclib_8c.html#a8" shape="rect" coords="138,58,208,85" alt="">
<area href="ueaclib_8c.html#a7" shape="rect" coords="140,109,206,135" alt="">
<area href="ueaclib_8c.html#a3" shape="rect" coords="138,159,208,186" alt="">
<area href="ueaclib_8c.html#a5" shape="rect" coords="126,210,220,237" alt="">
<area href="ueaclib_8c.html#a4" shape="rect" coords="134,261,212,287" alt="">
<area href="ueaclib_8c.html#a6" shape="rect" coords="128,311,218,338" alt="">
<area href="ueaclib_8c.html#a10" shape="rect" coords="134,362,212,389" alt="">
</map>
    </td>
  </tr>
</table>
<a class="anchor" name="a20"></a><!-- doxytag: member="ueaclib.h::led_pwm" ref="a20" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void led_pwm           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00441">441</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
References <a class="el" href="global_8c-source.html#l00060">high_time_limit</a>, and <a class="el" href="ueaclib_8c-source.html#l00440">PWM_COUNT_MASK</a>.
<p>
Referenced by <a class="el" href="timer_8c-source.html#l00066">timer_a0_irq()</a>.<div class="fragment"><pre class="fragment"><a name="l00441"></a>00441                           {
<a name="l00442"></a>00442   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> counter=0;
<a name="l00443"></a>00443   <span class="keywordflow">if</span> (enable) {
<a name="l00444"></a>00444     counter++;
<a name="l00445"></a>00445     counter&amp;=<a class="code" href="ueaclib_8c.html#a1">PWM_COUNT_MASK</a>; 
<a name="l00446"></a>00446     <span class="keywordflow">if</span> (!counter) {
<a name="l00447"></a>00447       P1OUT=0xFF;
<a name="l00448"></a>00448       P5OUT=0x07;
<a name="l00449"></a>00449       P5OUT=0;
<a name="l00450"></a>00450       P2OUT|=0x01;
<a name="l00451"></a>00451     }
<a name="l00452"></a>00452     P1OUT=0xFF;
<a name="l00453"></a>00453     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[0]) P1OUT&amp;=~0x01;
<a name="l00454"></a>00454     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[1]) P1OUT&amp;=~0x02;
<a name="l00455"></a>00455     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[2]) P1OUT&amp;=~0x04;
<a name="l00456"></a>00456     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[3]) P1OUT&amp;=~0x08;
<a name="l00457"></a>00457     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[4]) P1OUT&amp;=~0x10;
<a name="l00458"></a>00458     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[5]) P1OUT&amp;=~0x20;
<a name="l00459"></a>00459     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[6]) P1OUT&amp;=~0x40;
<a name="l00460"></a>00460     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[7]) P1OUT&amp;=~0x80;
<a name="l00461"></a>00461     P5OUT=0x01;
<a name="l00462"></a>00462     P5OUT=0x00;
<a name="l00463"></a>00463     P1OUT=0xFF;
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[8]) P1OUT&amp;=~0x01;
<a name="l00465"></a>00465     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[9]) P1OUT&amp;=~0x02;
<a name="l00466"></a>00466     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[10]) P1OUT&amp;=~0x04;
<a name="l00467"></a>00467     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[11]) P1OUT&amp;=~0x08;
<a name="l00468"></a>00468     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[12]) P1OUT&amp;=~0x10;
<a name="l00469"></a>00469     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[13]) P1OUT&amp;=~0x20;
<a name="l00470"></a>00470     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[14]) P1OUT&amp;=~0x40;
<a name="l00471"></a>00471     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[15]) P1OUT&amp;=~0x80;
<a name="l00472"></a>00472     P5OUT=0x02;
<a name="l00473"></a>00473     P5OUT=0x00;
<a name="l00474"></a>00474     P1OUT=0xFF;
<a name="l00475"></a>00475     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[16]) P1OUT&amp;=~0x01;
<a name="l00476"></a>00476     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[17]) P1OUT&amp;=~0x02;
<a name="l00477"></a>00477     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[18]) P1OUT&amp;=~0x04;
<a name="l00478"></a>00478     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[19]) P1OUT&amp;=~0x08;
<a name="l00479"></a>00479     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[20]) P1OUT&amp;=~0x10;
<a name="l00480"></a>00480     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[21]) P1OUT&amp;=~0x20;
<a name="l00481"></a>00481     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[22]) P1OUT&amp;=~0x40;
<a name="l00482"></a>00482     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[23]) P1OUT&amp;=~0x80;
<a name="l00483"></a>00483     P5OUT=0x04;
<a name="l00484"></a>00484     P5OUT=0x00;
<a name="l00485"></a>00485     <span class="keywordflow">if</span> (counter&gt;=<a class="code" href="global_8c.html#a7">high_time_limit</a>[24]) P2OUT&amp;=~0x01;
<a name="l00486"></a>00486   }
<a name="l00487"></a>00487 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="ueaclib.h::putchar" ref="a9" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int putchar           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00178">178</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.<div class="fragment"><pre class="fragment"><a name="l00178"></a>00178                         {
<a name="l00179"></a>00179   <span class="keywordflow">while</span> (!(IFG2&amp;UTXIFG1));
<a name="l00180"></a>00180   TXBUF1=in_char;
<a name="l00181"></a>00181   <span class="keywordflow">return</span>(0);
<a name="l00182"></a>00182 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member="ueaclib.h::putchar_0" ref="a7" args="(int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int putchar_0           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11"></a><!-- doxytag: member="ueaclib.h::send_spi_byte" ref="a11" args="(unsigned char)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">unsigned char send_spi_byte           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>char</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00154">154</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.<div class="fragment"><pre class="fragment"><a name="l00154"></a>00154                                                      {
<a name="l00155"></a>00155   TXBUF0 = data_byte;        <span class="comment">// buffer 1 write  </span>
<a name="l00156"></a>00156   <span class="keywordflow">while</span>(!(UTCTL0&amp;0x01));     <span class="comment">// wait until transmitter empty</span>
<a name="l00157"></a>00157   <span class="keywordflow">return</span>(RXBUF0);            <span class="comment">// return any received data</span>
<a name="l00158"></a>00158                              <span class="comment">// No data returned from DAC</span>
<a name="l00159"></a>00159                              <span class="comment">// SPI flash returns read data</span>
<a name="l00160"></a>00160 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16"></a><!-- doxytag: member="ueaclib.h::start_a2d_converter" ref="a16" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void start_a2d_converter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19"></a><!-- doxytag: member="ueaclib.h::system_reset" ref="a19" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void system_reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17"></a><!-- doxytag: member="ueaclib.h::wait_a2d_busy" ref="a17" args="(void)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int wait_a2d_busy           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00371">371</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.<div class="fragment"><pre class="fragment"><a name="l00371"></a>00371                         {
<a name="l00372"></a>00372   <span class="keywordtype">int</span> count=0;
<a name="l00373"></a>00373   <span class="keywordflow">while</span> (ADC12CTL1&amp;ADC12BUSY) count++;
<a name="l00374"></a>00374   <span class="keywordflow">return</span> count;
<a name="l00375"></a>00375 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18"></a><!-- doxytag: member="ueaclib.h::write_analog_mux" ref="a18" args="(unsigned char)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void write_analog_mux           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>char</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00377">377</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
Referenced by <a class="el" href="timer_8c-source.html#l00066">timer_a0_irq()</a>.<div class="fragment"><pre class="fragment"><a name="l00377"></a>00377                                             {
<a name="l00378"></a>00378   select&amp;=0x07;   <span class="comment">// clamp the input to 7 </span>
<a name="l00379"></a>00379   select&lt;&lt;=4;     <span class="comment">// shift to align with bits 6-4 (mux select bits)</span>
<a name="l00380"></a>00380   P4OUT&amp;=0x8F;    <span class="comment">// clear the mux select bits</span>
<a name="l00381"></a>00381   P4OUT|=select;  <span class="comment">// "or" in the new select value</span>
<a name="l00382"></a>00382 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13"></a><!-- doxytag: member="ueaclib.h::write_current" ref="a13" args="(int, int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void write_current           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00384">384</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
References <a class="el" href="cal__table_8h-source.html#l00045">dac_translation</a>, <a class="el" href="ueac_8h-source.html#l00101">cal::i_200uA_offset</a>, <a class="el" href="ueac_8h-source.html#l00102">cal::i_zero_offset</a>, <a class="el" href="ueac_8h-source.html#l00111">ueac::pin_cal</a>, <a class="el" href="global_8c-source.html#l00054">ueac_state</a>, and <a class="el" href="ueaclib_8c-source.html#l00395">write_dac()</a>.
<p>
Referenced by <a class="el" href="calibrate_8c-source.html#l00111">current_output_calibration()</a>, <a class="el" href="lla_8c-source.html#l00134">evaluate_lla()</a>, <a class="el" href="lla_8c-source.html#l00100">lla_disable()</a>, <a class="el" href="lla_8c-source.html#l00116">lla_enable()</a>, <a class="el" href="main_8c-source.html#l00088">main()</a>, <a class="el" href="main_8c-source.html#l00151">print_grid_i()</a>, <a class="el" href="main_8c-source.html#l00113">scan_probes()</a>, and <a class="el" href="ueac_8c-source.html#l00064">ueac_execute_instruction()</a>.<div class="fragment"><pre class="fragment"><a name="l00384"></a>00384                                              {
<a name="l00385"></a>00385   <span class="keywordflow">if</span> (value_uA&gt;200) value_uA=200;
<a name="l00386"></a>00386   <span class="keywordflow">if</span> (value_uA&lt;-200) value_uA=-200;
<a name="l00387"></a>00387   <span class="keywordflow">if</span> (value_uA==0) {
<a name="l00388"></a>00388     <a class="code" href="ueaclib_8c.html#a21">write_dac</a>(<a class="code" href="structchannel.html">channel</a>,(<a class="code" href="cal__table_8h.html#a0">dac_translation</a>[200]+<a class="code" href="global_8c.html#a1">ueac_state</a>.<a class="code" href="structueac.html#o3">pin_cal</a>[<a class="code" href="structchannel.html">channel</a>].<a class="code" href="structcal.html#o1">i_zero_offset</a>));
<a name="l00389"></a>00389   }
<a name="l00390"></a>00390   <span class="keywordflow">else</span> {
<a name="l00391"></a>00391     <a class="code" href="ueaclib_8c.html#a21">write_dac</a>(<a class="code" href="structchannel.html">channel</a>,<a class="code" href="cal__table_8h.html#a0">dac_translation</a>[200-value_uA]+<a class="code" href="global_8c.html#a1">ueac_state</a>.<a class="code" href="structueac.html#o3">pin_cal</a>[<a class="code" href="structchannel.html">channel</a>].<a class="code" href="structcal.html#o0">i_200uA_offset</a>);
<a name="l00392"></a>00392   }
<a name="l00393"></a>00393 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="ueaclib_8h_a13_cgraph.png" border="0" usemap="#ueaclib_8h_a13_cgraph_map" alt=""></center>
<map name="ueaclib_8h_a13_cgraph_map">
<area href="ueaclib_8c.html#a21" shape="rect" coords="157,8,237,34" alt="">
<area href="external__flash_8h.html#a5" shape="rect" coords="286,8,393,34" alt="">
</map>
    </td>
  </tr>
</table>
<a class="anchor" name="a12"></a><!-- doxytag: member="ueaclib.h::write_dac" ref="a12" args="(int, int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void write_dac           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00395">395</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
References <a class="el" href="ueaclib_8c-source.html#l00154">send_spi_byte()</a>.
<p>
Referenced by <a class="el" href="calibrate_8c-source.html#l00111">current_output_calibration()</a>, and <a class="el" href="ueaclib_8c-source.html#l00384">write_current()</a>.<div class="fragment"><pre class="fragment"><a name="l00395"></a>00395                                       {
<a name="l00396"></a>00396   <span class="comment">// write_dac(channel,value)</span>
<a name="l00397"></a>00397   <span class="comment">// channel = 0-24 where the channels are the control voltages for the current sources. The current </span>
<a name="l00398"></a>00398   <span class="comment">// sources are labeled starting at the top left corner as follows.</span>
<a name="l00399"></a>00399   <span class="comment">//  0  1  2  3  4</span>
<a name="l00400"></a>00400   <span class="comment">//  5  6  7  8  9</span>
<a name="l00401"></a>00401   <span class="comment">// 10 11 12 13 14</span>
<a name="l00402"></a>00402   <span class="comment">// 15 16 17 18 19</span>
<a name="l00403"></a>00403   <span class="comment">// 20 21 22 23 24</span>
<a name="l00404"></a>00404   <span class="comment">//</span>
<a name="l00405"></a>00405   <span class="comment">// Value = 0-1023 (10-bit) where the number represents a control voltage that is 0-3.3v. Each bit represents </span>
<a name="l00406"></a>00406   <span class="comment">// a voltage of 3.3v/1023 or 3.22mV. </span>
<a name="l00407"></a>00407   <span class="comment">//</span>
<a name="l00408"></a>00408   <span class="comment">// Hardware Note: Channels 0-23 are implemented by external SPI octal dacs (Linear LTC1660 components). Channel </span>
<a name="l00409"></a>00409   <span class="comment">// 24 is implemented using DAC0 on the MSP430 </span>
<a name="l00410"></a>00410   <span class="comment">// </span>
<a name="l00411"></a>00411   <span class="comment">// Initial Version BH 11/1/05</span>
<a name="l00412"></a>00412 
<a name="l00413"></a>00413   <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a> &lt; 8) {
<a name="l00414"></a>00414     P4OUT&amp;=~0x01;                                   <span class="comment">// assert the proper chip select</span>
<a name="l00415"></a>00415     <a class="code" href="structchannel.html">channel</a>++;                                      <span class="comment">// increment the channel number LTC1660 channels run from 1-8   </span>
<a name="l00416"></a>00416   }           
<a name="l00417"></a>00417   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a> &lt; 16) {
<a name="l00418"></a>00418     P4OUT&amp;=~0x02;                                   <span class="comment">// assert the proper chip select</span>
<a name="l00419"></a>00419     <a class="code" href="structchannel.html">channel</a>-=7;                                     <span class="comment">// bring channel number into range 1-8</span>
<a name="l00420"></a>00420   } 
<a name="l00421"></a>00421   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a> &lt; 24) {
<a name="l00422"></a>00422     P4OUT&amp;=~0x04;                                   <span class="comment">// assert the proper chip select</span>
<a name="l00423"></a>00423     <a class="code" href="structchannel.html">channel</a>-=15;                                    <span class="comment">// bring channel number into range 1-8</span>
<a name="l00424"></a>00424   }
<a name="l00425"></a>00425   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a> == 24) {
<a name="l00426"></a>00426     DAC12_0DAT=value&lt;&lt;2;                            <span class="comment">// Shift up to a 12-bit number and write to the MSP430 DAC0 </span>
<a name="l00427"></a>00427     <span class="keywordflow">return</span>;                                         <span class="comment">// This is all to do for the MSP430 DAC case, exit...</span>
<a name="l00428"></a>00428   }
<a name="l00429"></a>00429   <span class="keywordflow">else</span> {                                            <span class="comment">// channel number provided is too large, exit... </span>
<a name="l00430"></a>00430     <span class="keywordflow">return</span>;
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432   value=(value&amp;0x03FF)&lt;&lt;2;                          <span class="comment">// mask and shift the value to align properly in the dac sentence</span>
<a name="l00433"></a>00433   <a class="code" href="structchannel.html">channel</a>&lt;&lt;=4;
<a name="l00434"></a>00434   *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;value)+1)|=((<span class="keywordtype">unsigned</span> char) <a class="code" href="structchannel.html">channel</a>); <span class="comment">// "or" in the channel number to the value data</span>
<a name="l00435"></a>00435   <a class="code" href="external__flash_8h.html#a5">send_spi_byte</a>(*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;value)+1));             <span class="comment">// send the high byte </span>
<a name="l00436"></a>00436   <a class="code" href="external__flash_8h.html#a5">send_spi_byte</a>(*((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;value));                 <span class="comment">// send the high byte </span>
<a name="l00437"></a>00437   P4OUT|=0x0F;                                                <span class="comment">// deassert all of the spi dac chip selects   </span>
<a name="l00438"></a>00438 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="ueaclib_8h_a12_cgraph.png" border="0" usemap="#ueaclib_8h_a12_cgraph_map" alt=""></center>
<map name="ueaclib_8h_a12_cgraph_map">
<area href="external__flash_8h.html#a5" shape="rect" coords="137,8,243,34" alt="">
</map>
    </td>
  </tr>
</table>
<a class="anchor" name="a14"></a><!-- doxytag: member="ueaclib.h::write_led" ref="a14" args="(int, int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void write_led           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00497">497</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
Referenced by <a class="el" href="calibrate_8c-source.html#l00111">current_output_calibration()</a>, <a class="el" href="main_8c-source.html#l00088">main()</a>, and <a class="el" href="calibrate_8c-source.html#l00061">scan_leds()</a>.<div class="fragment"><pre class="fragment"><a name="l00497"></a>00497                                          {
<a name="l00498"></a>00498   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> led_state = 0x00000000;
<a name="l00499"></a>00499   <span class="keywordflow">if</span> (enable) {
<a name="l00500"></a>00500     <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;8) {
<a name="l00501"></a>00501       *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;       <span class="comment">// Save the new state of the LED in led_state</span>
<a name="l00502"></a>00502       P1OUT=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state);                  <span class="comment">// Place the relevant byte of led_state on the latch bus </span>
<a name="l00503"></a>00503       P5OUT|=0x01;                                            <span class="comment">// strobe the chip select for the target latch</span>
<a name="l00504"></a>00504       P5OUT&amp;=~0x01;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00505"></a>00505     }
<a name="l00506"></a>00506     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;16) {
<a name="l00507"></a>00507       <a class="code" href="structchannel.html">channel</a>-=8;
<a name="l00508"></a>00508       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+1) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;  
<a name="l00509"></a>00509       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+1);  
<a name="l00510"></a>00510       P5OUT=0x02;
<a name="l00511"></a>00511       P5OUT&amp;=~0x02;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00512"></a>00512     }
<a name="l00513"></a>00513     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;24) {
<a name="l00514"></a>00514       <a class="code" href="structchannel.html">channel</a>-=16;
<a name="l00515"></a>00515       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+2) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;  
<a name="l00516"></a>00516       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+2);  
<a name="l00517"></a>00517       P5OUT=0x04;
<a name="l00518"></a>00518       P5OUT&amp;=~0x04;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00519"></a>00519     }
<a name="l00520"></a>00520     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>==24) {
<a name="l00521"></a>00521       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+3) |= 0x01;  
<a name="l00522"></a>00522       P2OUT|=0x01;
<a name="l00523"></a>00523     }
<a name="l00524"></a>00524   }
<a name="l00525"></a>00525   <span class="keywordflow">else</span> {
<a name="l00526"></a>00526     <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;8) {
<a name="l00527"></a>00527       *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00528"></a>00528       P1OUT=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state);  
<a name="l00529"></a>00529       P5OUT=0x01;
<a name="l00530"></a>00530       P5OUT&amp;=~0x01;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00531"></a>00531     }
<a name="l00532"></a>00532     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;16) {
<a name="l00533"></a>00533       <a class="code" href="structchannel.html">channel</a>-=8;
<a name="l00534"></a>00534       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+1) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00535"></a>00535       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+1);  
<a name="l00536"></a>00536       P5OUT=0x02;
<a name="l00537"></a>00537       P5OUT&amp;=~0x02;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00538"></a>00538     }
<a name="l00539"></a>00539     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;24) {
<a name="l00540"></a>00540       <a class="code" href="structchannel.html">channel</a>-=16;
<a name="l00541"></a>00541       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+2) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00542"></a>00542       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+2);  
<a name="l00543"></a>00543       P5OUT=0x04;
<a name="l00544"></a>00544       P5OUT&amp;=~0x04;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00545"></a>00545     }
<a name="l00546"></a>00546     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>==24) {
<a name="l00547"></a>00547       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;led_state)+3) &amp;= 0xFE;  
<a name="l00548"></a>00548       P2OUT&amp;=0xFE;
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550   }
<a name="l00551"></a>00551 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15"></a><!-- doxytag: member="ueaclib.h::write_lla" ref="a15" args="(int, int)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void write_lla           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ueaclib_8c-source.html#l00553">553</a> of file <a class="el" href="ueaclib_8c-source.html">ueaclib.c</a>.
<p>
Referenced by <a class="el" href="calibrate_8c-source.html#l00111">current_output_calibration()</a>, <a class="el" href="lla_8c-source.html#l00076">lla_add()</a>, <a class="el" href="lla_8c-source.html#l00100">lla_disable()</a>, <a class="el" href="lla_8c-source.html#l00116">lla_enable()</a>, <a class="el" href="main_8c-source.html#l00088">main()</a>, <a class="el" href="main_8c-source.html#l00151">print_grid_i()</a>, and <a class="el" href="main_8c-source.html#l00113">scan_probes()</a>.<div class="fragment"><pre class="fragment"><a name="l00553"></a>00553                                          {
<a name="l00554"></a>00554   <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> lla_state = 0x00000000;
<a name="l00555"></a>00555   <span class="keywordflow">if</span> (enable) {
<a name="l00556"></a>00556     <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;8) {
<a name="l00557"></a>00557       *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;       <span class="comment">// Save the new state of the LED in lla_state</span>
<a name="l00558"></a>00558       P1OUT=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state);                  <span class="comment">// Place the relevant byte of lla_state on the latch bus </span>
<a name="l00559"></a>00559       P5OUT|=0x08;                                            <span class="comment">// strobe the chip select for the target latch</span>
<a name="l00560"></a>00560       P5OUT&amp;=~0x08;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;16) {
<a name="l00563"></a>00563       <a class="code" href="structchannel.html">channel</a>-=8;
<a name="l00564"></a>00564       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+1) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;  
<a name="l00565"></a>00565       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+1);  
<a name="l00566"></a>00566       P5OUT=0x10;
<a name="l00567"></a>00567       P5OUT&amp;=~0x10;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00568"></a>00568     }
<a name="l00569"></a>00569     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;24) {
<a name="l00570"></a>00570       <a class="code" href="structchannel.html">channel</a>-=16;
<a name="l00571"></a>00571       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+2) |= 0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>;  
<a name="l00572"></a>00572       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+2);  
<a name="l00573"></a>00573       P5OUT=0x20;
<a name="l00574"></a>00574       P5OUT&amp;=~0x20;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00575"></a>00575     }
<a name="l00576"></a>00576     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>==24) {
<a name="l00577"></a>00577       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+3) |= 0x01;  
<a name="l00578"></a>00578       P2OUT|=0x02;
<a name="l00579"></a>00579     }
<a name="l00580"></a>00580   }
<a name="l00581"></a>00581   <span class="keywordflow">else</span> {
<a name="l00582"></a>00582     <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;8) {
<a name="l00583"></a>00583       *((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00584"></a>00584       P1OUT=*((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state);  
<a name="l00585"></a>00585       P5OUT=0x08;
<a name="l00586"></a>00586       P5OUT&amp;=~0x08;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00587"></a>00587     }
<a name="l00588"></a>00588     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;16) {
<a name="l00589"></a>00589       <a class="code" href="structchannel.html">channel</a>-=8;
<a name="l00590"></a>00590       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+1) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00591"></a>00591       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+1);  
<a name="l00592"></a>00592       P5OUT=0x10;
<a name="l00593"></a>00593       P5OUT&amp;=~0x10;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00594"></a>00594     }
<a name="l00595"></a>00595     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>&lt;24) {
<a name="l00596"></a>00596       <a class="code" href="structchannel.html">channel</a>-=16;
<a name="l00597"></a>00597       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+2) &amp;= ~(0x01&lt;&lt;<a class="code" href="structchannel.html">channel</a>);  
<a name="l00598"></a>00598       P1OUT=*(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+2);  
<a name="l00599"></a>00599       P5OUT=0x20;
<a name="l00600"></a>00600       P5OUT&amp;=~0x20;                                           <span class="comment">// clear the chip select bit</span>
<a name="l00601"></a>00601     }
<a name="l00602"></a>00602     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="structchannel.html">channel</a>==24) {
<a name="l00603"></a>00603       *(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) &amp;lla_state)+3) &amp;= 0xFE;  
<a name="l00604"></a>00604       P2OUT&amp;=0xFD;
<a name="l00605"></a>00605     }
<a name="l00606"></a>00606   }
<a name="l00607"></a>00607 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Apr 20 13:57:31 2006 for uEACos by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
